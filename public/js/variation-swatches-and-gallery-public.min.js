(()=>{function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}!function(e,i,n,a){"use strict";function s(t,i){this.element=t,this.settings=e.extend({},{},i),this.$element=e(t),this.$element.addClass("vsg-loaded"),this.product_variations=this.$element.data("product_variations")||[],this.is_ajax_variation=this.product_variations.length>0,this.attributeFields=this.$element.find(".variations select"),this.init(),this.update(),this.tooltip()}e.extend(s.prototype,{init:function(){this.$element.find("ul.vsg-swatch-items-wrapper").each((function(t,i){var n=e(this).siblings("select.vsg-raw-select");e(this).on("click.vsg","li.vsg-swatch-item",(function(t){t.preventDefault(),t.stopPropagation();var i=e(this).data("value");_VSG.option.single.clear_on_reselect&&n.val()&&n.val()===i?n.val(""):n.val(i),n.trigger("change"),n.trigger("click"),n.trigger("focusin")}))}))},update:function(){var t=this;this.$element.on("woocommerce_variation_has_changed.vsg",(function(e){t.swatchSetup(),t.stockCount(),t.selectedAttribute()}))},swatchSetup:function(){this.$element.find("ul.vsg-swatch-items-wrapper").each((function(t,i){var n=e(this).siblings("select.vsg-raw-select"),a=0===n.find("option:selected").length?null:n.find("option:selected").val(),s=[],r=[];n.find("option").each((function(){""!==e(this).val()&&s.push(e(this).val())})),n.find("option:disabled").each((function(){""!==e(this).val()&&r.push(e(this).val())}));var o=_.difference(s,r);e(this).find("li.vsg-swatch-item").each((function(t,i){var n=e(this).attr("data-value");e(this).removeClass("vsg-swatch-item-selected").addClass("vsg-swatch-item-disabled"),_.includes(o,n)&&(e(this).removeClass("vsg-swatch-item-selected vsg-swatch-item-disabled"),n===a&&e(this).addClass("vsg-swatch-item-selected"))}))}))},stockCount:function(){for(var t=this,i=this.$element.find("ul.vsg-swatch-items-wrapper").find("li.vsg-swatch-item-selected"),n=[],a=[],s=0;s<i.length;s++)n.push(e(i[s]).data("value")),a.push(e(i[s]).parent().data("attribute_name"));this.$element.find("li.vsg-swatch-item").each((function(i,s){for(var r=e(this).data("value"),o=e(this).parent().data("attribute_name"),l=0,c=0;c<t.product_variations.length;c++){var h=t.product_variations[c].attributes,u=t.product_variations[c].stock_quantity,d=t.checkemptykey(h);if(h[o]==r||!h[o]){for(var f=0;f<n.length;f++){var v=Object.values(h).includes(n[f]);v||a[f]===o||!h[o]||d.length||(u=0),d&&(d.includes(a[f])||(v=Object.values(h).includes(n[f]))||a[f]===o||(u=0))}l+=u}e(this).find(".vsg-swatch-item-stock-count").text(l+" left")}}))},selectedAttribute:function(){if(!_VSG.option.single.selected_variation_attribute_label)return!1;this.$element.find("li.vsg-swatch-item").each((function(t,i){if(e(this).hasClass("vsg-swatch-item-selected")){var n=e(this).data("title");0===e(this).parents("tr").find("th.label .selected-attribute").length&&e(this).parents("tr").find("th.label").append('<span class="selected-attribute"></span>'),e(this).parents("tr").find("th.label .selected-attribute").text(" "+_VSG.option.single.label_separator+" "+n)}0==e(this).parent().find(".vsg-swatch-item-selected").length&&e(this).parents("tr").find("th.label .selected-attribute").remove()}))},tooltip:function(){this.$element.find("li.vsg-swatch-item").each((function(t,i){e(this).mouseover((function(){e(this).find(".vsg-swatch-item-tooltip").fadeIn("slow")})),e(this).mouseleave((function(){e(this).find(".vsg-swatch-item-tooltip").fadeOut("fast")}))}))},checkemptykey:function(e){for(var i=[],n=0,a=Object.entries(e);n<a.length;n++){var s=(o=a[n],l=2,function(t){if(Array.isArray(t))return t}(o)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,a,s,r,o=[],l=!0,c=!1;try{if(s=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=s.call(i)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(t){c=!0,a=t}finally{try{if(!l&&null!=i.return&&(r=i.return(),Object(r)!==r))return}finally{if(c)throw a}}return o}}(o,l)||function(e,i){if(e){if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,i):void 0}}(o,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=s[0];s[1]||i.push(r)}var o,l;return i}}),e.fn.VSG=function(t){return this.each((function(){e.data(this,"VSG")||e.data(this,"VSG",new s(this,t))}))}}(jQuery,window,document),function(t,e,i,n){"use strict";function a(e){var i=t(".woocommerce-product-gallery").data("flexslider");if(i){for(var n=i.slides,a=0;a<n.length;a++)i.removeSlide(n[a]);for(var s in e)if(e.hasOwnProperty(s)){var r=e[s];i.addSlide(r,0)}}}t(i).on("wc_variation_form.vsg",".variations_form:not(.vsg-loaded)",(function(e){t(this).VSG()})),t(".variations_form:not(.vsg-loaded)").on("found_variation.vsg",(function(t,e){console.log("found_variation"),a(e.variation_gallery_images)})),t(".variations_form:not(.vsg-loaded)").on("reset_data.vsg",(function(t){a(_VSG.gallery_images)}))}(jQuery,window,document)})();